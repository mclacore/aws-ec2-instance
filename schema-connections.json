{
    "$id": "https://schemas.massdriver.cloud/schemas/bundles/aws-ec2-instance/schema-connections.json",
    "$schema": "http://json-schema.org/draft-07/schema",
    "description": "test aws ec2 instance",
    "properties": {
        "aws_authentication": {
            "$id": "https://api.massdriver.cloud/artifact-definitions/massdriver/aws-iam-role",
            "$md": {
                "access": "public",
                "cloud": {
                    "id": "aws",
                    "regions": [
                        {
                            "code": "us-east-1",
                            "name": "US East (N. Virginia)"
                        },
                        {
                            "code": "us-east-2",
                            "name": "US East (Ohio)"
                        },
                        {
                            "code": "us-west-1",
                            "name": "US West (N. California)"
                        },
                        {
                            "code": "us-west-2",
                            "name": "US West (Oregon)"
                        },
                        {
                            "code": "af-south-1",
                            "name": "Africa (Cape Town)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "ap-east-1",
                            "name": "Asia Pacific (Hong Kong)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "ap-south-2",
                            "name": "Asia Pacific (Hyderabad)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "ap-southeast-3",
                            "name": "Asia Pacific (Jakarta)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "ap-southeast-4",
                            "name": "Asia Pacific (Melbourne)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "ap-south-1",
                            "name": "Asia Pacific (Mumbai)"
                        },
                        {
                            "code": "ap-northeast-3",
                            "name": "Asia Pacific (Osaka)"
                        },
                        {
                            "code": "ap-northeast-2",
                            "name": "Asia Pacific (Seoul)"
                        },
                        {
                            "code": "ap-southeast-1",
                            "name": "Asia Pacific (Singapore)"
                        },
                        {
                            "code": "ap-southeast-2",
                            "name": "Asia Pacific (Sydney)"
                        },
                        {
                            "code": "ap-northeast-1",
                            "name": "Asia Pacific (Tokyo)"
                        },
                        {
                            "code": "ca-central-1",
                            "name": "Canada (Central)"
                        },
                        {
                            "code": "eu-central-1",
                            "name": "Europe (Frankfurt)"
                        },
                        {
                            "code": "eu-west-1",
                            "name": "Europe (Ireland)"
                        },
                        {
                            "code": "eu-west-2",
                            "name": "Europe (London)"
                        },
                        {
                            "code": "eu-south-1",
                            "name": "Europe (Milan)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "eu-west-3",
                            "name": "Europe (Paris)"
                        },
                        {
                            "code": "eu-south-2",
                            "name": "Europe (Spain)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "eu-north-1",
                            "name": "Europe (Stockholm)"
                        },
                        {
                            "code": "eu-central-2",
                            "name": "Europe (Zurich)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "me-south-1",
                            "name": "Middle East (Bahrain)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "me-central-1",
                            "name": "Middle East (UAE)",
                            "restrictions": "opt-in"
                        },
                        {
                            "code": "sa-east-1",
                            "name": "South America (SÃ£o Paulo)"
                        },
                        {
                            "code": "us-gov-east-1",
                            "name": "AWS GovCloud (US-East)",
                            "restrictions": "by-request"
                        },
                        {
                            "code": "us-gov-west-1",
                            "name": "AWS GovCloud (US-West)",
                            "restrictions": "by-request"
                        }
                    ],
                    "services": [
                        {
                            "code": "acm",
                            "name": "acm"
                        },
                        {
                            "code": "amplify",
                            "name": "amplify"
                        },
                        {
                            "code": "apigateway",
                            "name": "apigateway"
                        },
                        {
                            "code": "appconfig",
                            "name": "appconfig"
                        },
                        {
                            "code": "appflow",
                            "name": "appflow"
                        },
                        {
                            "code": "appmesh",
                            "name": "appmesh"
                        },
                        {
                            "code": "apprunner",
                            "name": "apprunner"
                        },
                        {
                            "code": "appstream",
                            "name": "appstream"
                        },
                        {
                            "code": "appsync",
                            "name": "appsync"
                        },
                        {
                            "code": "aps",
                            "name": "aps"
                        },
                        {
                            "code": "athena",
                            "name": "athena"
                        },
                        {
                            "code": "auditmanager",
                            "name": "auditmanager"
                        },
                        {
                            "code": "autoscaling",
                            "name": "autoscaling"
                        },
                        {
                            "code": "backup",
                            "name": "backup"
                        },
                        {
                            "code": "batch",
                            "name": "batch"
                        },
                        {
                            "code": "budgets",
                            "name": "budgets"
                        },
                        {
                            "code": "cassandra",
                            "name": "cassandra"
                        },
                        {
                            "code": "cloud9",
                            "name": "cloud9"
                        },
                        {
                            "code": "cloudformation",
                            "name": "cloudformation"
                        },
                        {
                            "code": "cloudfront",
                            "name": "cloudfront"
                        },
                        {
                            "code": "cloudtrail",
                            "name": "cloudtrail"
                        },
                        {
                            "code": "cloudwatch",
                            "name": "cloudwatch"
                        },
                        {
                            "code": "codeartifact",
                            "name": "codeartifact"
                        },
                        {
                            "code": "codebuild",
                            "name": "codebuild"
                        },
                        {
                            "code": "codedeploy",
                            "name": "codedeploy"
                        },
                        {
                            "code": "codepipeline",
                            "name": "codepipeline"
                        },
                        {
                            "code": "config",
                            "name": "config"
                        },
                        {
                            "code": "connect",
                            "name": "connect"
                        },
                        {
                            "code": "datasync",
                            "name": "datasync"
                        },
                        {
                            "code": "detective",
                            "name": "detective"
                        },
                        {
                            "code": "devicefarm",
                            "name": "devicefarm"
                        },
                        {
                            "code": "dms",
                            "name": "dms"
                        },
                        {
                            "code": "dynamodb",
                            "name": "dynamodb"
                        },
                        {
                            "code": "ec2",
                            "name": "ec2"
                        },
                        {
                            "code": "ecr",
                            "name": "ecr"
                        },
                        {
                            "code": "ecs",
                            "name": "ecs"
                        },
                        {
                            "code": "eks",
                            "name": "eks"
                        },
                        {
                            "code": "elasticbeanstalk",
                            "name": "elasticbeanstalk"
                        },
                        {
                            "code": "elasticloadbalancing",
                            "name": "elasticloadbalancing"
                        },
                        {
                            "code": "events",
                            "name": "events"
                        },
                        {
                            "code": "evidently",
                            "name": "evidently"
                        },
                        {
                            "code": "fis",
                            "name": "fis"
                        },
                        {
                            "code": "forecast",
                            "name": "forecast"
                        },
                        {
                            "code": "frauddetector",
                            "name": "frauddetector"
                        },
                        {
                            "code": "globalaccelerator",
                            "name": "globalaccelerator"
                        },
                        {
                            "code": "glue",
                            "name": "glue"
                        },
                        {
                            "code": "groundstation",
                            "name": "groundstation"
                        },
                        {
                            "code": "guardduty",
                            "name": "guardduty"
                        },
                        {
                            "code": "healthlake",
                            "name": "healthlake"
                        },
                        {
                            "code": "iam",
                            "name": "iam"
                        },
                        {
                            "code": "imagebuilder",
                            "name": "imagebuilder"
                        },
                        {
                            "code": "iot",
                            "name": "iot"
                        },
                        {
                            "code": "iotanalytics",
                            "name": "iotanalytics"
                        },
                        {
                            "code": "iotevents",
                            "name": "iotevents"
                        },
                        {
                            "code": "iotsitewise",
                            "name": "iotsitewise"
                        },
                        {
                            "code": "iottwinmaker",
                            "name": "iottwinmaker"
                        },
                        {
                            "code": "iotwireless",
                            "name": "iotwireless"
                        },
                        {
                            "code": "ivs",
                            "name": "ivs"
                        },
                        {
                            "code": "kafkaconnect",
                            "name": "kafkaconnect"
                        },
                        {
                            "code": "kendra",
                            "name": "kendra"
                        },
                        {
                            "code": "kinesis",
                            "name": "kinesis"
                        },
                        {
                            "code": "kinesisvideo",
                            "name": "kinesisvideo"
                        },
                        {
                            "code": "kms",
                            "name": "kms"
                        },
                        {
                            "code": "lambda",
                            "name": "lambda"
                        },
                        {
                            "code": "lex",
                            "name": "lex"
                        },
                        {
                            "code": "lightsail",
                            "name": "lightsail"
                        },
                        {
                            "code": "logs",
                            "name": "logs"
                        },
                        {
                            "code": "lookoutmetrics",
                            "name": "lookoutmetrics"
                        },
                        {
                            "code": "lookoutvision",
                            "name": "lookoutvision"
                        },
                        {
                            "code": "mediaconnect",
                            "name": "mediaconnect"
                        },
                        {
                            "code": "mediapackage",
                            "name": "mediapackage"
                        },
                        {
                            "code": "mediatailor",
                            "name": "mediatailor"
                        },
                        {
                            "code": "networkmanager",
                            "name": "networkmanager"
                        },
                        {
                            "code": "panorama",
                            "name": "panorama"
                        },
                        {
                            "code": "personalize",
                            "name": "personalize"
                        },
                        {
                            "code": "qldb",
                            "name": "qldb"
                        },
                        {
                            "code": "rds",
                            "name": "rds"
                        },
                        {
                            "code": "redshift",
                            "name": "redshift"
                        },
                        {
                            "code": "resiliencehub",
                            "name": "resiliencehub"
                        },
                        {
                            "code": "robomaker",
                            "name": "robomaker"
                        },
                        {
                            "code": "route53",
                            "name": "route53"
                        },
                        {
                            "code": "route53resolver",
                            "name": "route53resolver"
                        },
                        {
                            "code": "rum",
                            "name": "rum"
                        },
                        {
                            "code": "s3",
                            "name": "s3"
                        },
                        {
                            "code": "sagemaker",
                            "name": "sagemaker"
                        },
                        {
                            "code": "secretsmanager",
                            "name": "secretsmanager"
                        },
                        {
                            "code": "servicecatalog",
                            "name": "servicecatalog"
                        },
                        {
                            "code": "servicediscovery",
                            "name": "servicediscovery"
                        },
                        {
                            "code": "ses",
                            "name": "ses"
                        },
                        {
                            "code": "shield",
                            "name": "shield"
                        },
                        {
                            "code": "signer",
                            "name": "signer"
                        },
                        {
                            "code": "sns",
                            "name": "sns"
                        },
                        {
                            "code": "sqs",
                            "name": "sqs"
                        },
                        {
                            "code": "ssm",
                            "name": "ssm"
                        },
                        {
                            "code": "transfer",
                            "name": "transfer"
                        },
                        {
                            "code": "waf",
                            "name": "waf"
                        },
                        {
                            "code": "wafv2",
                            "name": "wafv2"
                        },
                        {
                            "code": "workspaces",
                            "name": "workspaces"
                        },
                        {
                            "code": "xray",
                            "name": "xray"
                        }
                    ]
                },
                "containerRepositories": {
                    "cloud": "aws",
                    "label": "ECR"
                },
                "defaultTargetConnectionGroup": "credentials",
                "defaultTargetConnectionGroupLabel": "AWS IAM Role",
                "diagram": {
                    "isLinkable": false
                },
                "dnsZones": {
                    "cloud": "aws",
                    "label": "AWS Route 53"
                },
                "extensions": {
                    "costReporting": true
                },
                "importing": {
                    "group": "authentication"
                },
                "name": "aws-iam-role"
            },
            "$schema": "http://json-schema.org/draft-07/schema",
            "additionalProperties": false,
            "description": "",
            "properties": {
                "data": {
                    "properties": {
                        "arn": {
                            "$schema": "http://json-schema.org/draft-07/schema",
                            "description": "Amazon Resource Name",
                            "examples": [
                                "arn:aws:rds::ACCOUNT_NUMBER:db/prod",
                                "arn:aws:ec2::ACCOUNT_NUMBER:vpc/vpc-foo"
                            ],
                            "message": {
                                "pattern": "Correct format of an arn described here: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html"
                            },
                            "pattern": "^arn:aws:[a-zA-Z0-9._-]*:[a-zA-Z0-9._-]*:(?:[0-9]{12})?:[a-zA-Z0-9/:._-]+$",
                            "title": "AWS ARN",
                            "type": "string"
                        },
                        "external_id": {
                            "description": "An external ID is a piece of data that can be passed to the AssumeRole API of the Security Token Service (STS). You can then use the external ID in the condition element in a role's trust policy, allowing the role to be assumed only when a certain value is present in the external ID.",
                            "title": "External ID",
                            "type": "string"
                        }
                    },
                    "required": [
                        "arn"
                    ],
                    "title": "Artifact Data",
                    "type": "object"
                },
                "specs": {
                    "properties": {
                        "aws": {
                            "$schema": "http://json-schema.org/draft-07/schema",
                            "description": "",
                            "properties": {
                                "region": {
                                    "$schema": "http://json-schema.org/draft-07/schema",
                                    "description": "AWS Region to provision in.",
                                    "examples": [
                                        "us-west-2"
                                    ],
                                    "title": "Region",
                                    "type": "string"
                                }
                            },
                            "required": [],
                            "title": "AWS Artifact Specs",
                            "type": "object"
                        }
                    },
                    "title": "Artifact Specs",
                    "type": "object"
                }
            },
            "required": [
                "data",
                "specs"
            ],
            "title": "AWS IAM Role",
            "type": "object"
        },
        "cdn": {
            "$id": "https://api.massdriver.cloud/artifact-definitions/lacore/azure-cdn",
            "$md": {
                "access": "private",
                "name": "azure-cdn"
            },
            "$schema": "http://json-schema.org/draft-07/schema",
            "additionalProperties": false,
            "description": "",
            "properties": {
                "data": {
                    "properties": {
                        "infrastructure": {
                            "properties": {
                                "ari": {
                                    "description": "Azure Resource ID",
                                    "examples": [
                                        "/subscriptions/12345678-1234-1234-abcd-1234567890ab/resourceGroups/resource-group-name/providers/Microsoft.Network/virtualNetworks/network-name"
                                    ],
                                    "message": {
                                        "pattern": "Must be a valid Azure Resource ID"
                                    },
                                    "pattern": "^/subscriptions/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}/resource(g|G)roups/[a-zA-Z0-9-_.()]{0,89}[a-zA-Z0-9-_()]/providers/Microsoft\\.[a-zA-Z]+/[a-zA-Z]+(?:/[a-zA-Z0-9-_.()]+)+$",
                                    "title": "Azure Resource ID",
                                    "type": "string"
                                },
                                "endpoints": {
                                    "additionalProperties": false,
                                    "description": "Azure CDN endpoints and origins",
                                    "title": "Azure CDN Endpoints",
                                    "type": "array"
                                }
                            },
                            "required": [
                                "ari",
                                "endpoints"
                            ],
                            "title": "Infrastructure configuration",
                            "type": "object"
                        },
                        "security": {
                            "properties": {
                                "iam": {
                                    "additionalProperties": false,
                                    "description": "IAM Roles and Scopes",
                                    "patternProperties": {
                                        "^[a-z]+[a-z_]*[a-z]$": {
                                            "properties": {
                                                "role": {
                                                    "description": "Azure Role",
                                                    "examples": [
                                                        "Storage Blob Data Reader"
                                                    ],
                                                    "message": {
                                                        "pattern": "Must be a valid Azure Role (uppercase, lowercase letters and spaces)"
                                                    },
                                                    "pattern": "^[a-zA-Z ]+$",
                                                    "title": "Role"
                                                },
                                                "scope": {
                                                    "description": "Azure IAM Scope",
                                                    "title": "Scope",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "role",
                                                "scope"
                                            ],
                                            "type": "object"
                                        }
                                    },
                                    "title": "IAM"
                                }
                            },
                            "required": [],
                            "title": "Security configuration",
                            "type": "object"
                        }
                    },
                    "required": [
                        "infrastructure",
                        "security"
                    ],
                    "title": "Artifact Data",
                    "type": "object"
                },
                "specs": {
                    "properties": {
                        "azure": {
                            "description": "",
                            "properties": {
                                "region": {
                                    "description": "Select the Azure region to provision resources in.",
                                    "title": "Azure Region",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "region"
                            ],
                            "title": "Azure Artifact Specs",
                            "type": "object"
                        }
                    },
                    "title": "Artifact Specs",
                    "type": "object"
                }
            },
            "required": [
                "data",
                "specs"
            ],
            "title": "Azure CDN",
            "type": "object"
        },
        "vpc": {
            "$id": "https://api.massdriver.cloud/artifact-definitions/massdriver/aws-vpc",
            "$md": {
                "access": "public",
                "defaultTargetConnectionGroup": "networking",
                "defaultTargetConnectionGroupLabel": "AWS",
                "importing": {
                    "group": "networking"
                },
                "name": "aws-vpc"
            },
            "$schema": "http://json-schema.org/draft-07/schema",
            "additionalProperties": false,
            "description": "",
            "properties": {
                "data": {
                    "properties": {
                        "infrastructure": {
                            "properties": {
                                "arn": {
                                    "$schema": "http://json-schema.org/draft-07/schema",
                                    "description": "Amazon Resource Name",
                                    "examples": [
                                        "arn:aws:rds::ACCOUNT_NUMBER:db/prod",
                                        "arn:aws:ec2::ACCOUNT_NUMBER:vpc/vpc-foo"
                                    ],
                                    "message": {
                                        "pattern": "Correct format of an arn described here: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html"
                                    },
                                    "pattern": "^arn:aws:[a-zA-Z0-9._-]*:[a-zA-Z0-9._-]*:(?:[0-9]{12})?:[a-zA-Z0-9/:._-]+$",
                                    "title": "AWS ARN",
                                    "type": "string"
                                },
                                "cidr": {
                                    "$schema": "http://json-schema.org/draft-07/schema",
                                    "examples": [
                                        "10.100.0.0/16",
                                        "192.24.12.0/22"
                                    ],
                                    "message": {
                                        "pattern": "Correct format of CIDR range is IPv4 address and subnet mask for example: 10.0.0.0/24"
                                    },
                                    "pattern": "^(?:[0-9]|[0-9]{2}|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[0-9]{2}|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}(?:/(?:[1-9]|1[0-9]|2[0-9]|3[0-2]))$",
                                    "type": "string"
                                },
                                "internal_subnets": {
                                    "items": {
                                        "$schema": "http://json-schema.org/draft-07/schema",
                                        "description": "AWS VCP Subnet",
                                        "examples": [],
                                        "properties": {
                                            "arn": {
                                                "$schema": "http://json-schema.org/draft-07/schema",
                                                "description": "Amazon Resource Name",
                                                "examples": [
                                                    "arn:aws:rds::ACCOUNT_NUMBER:db/prod",
                                                    "arn:aws:ec2::ACCOUNT_NUMBER:vpc/vpc-foo"
                                                ],
                                                "message": {
                                                    "pattern": "Correct format of an arn described here: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html"
                                                },
                                                "pattern": "^arn:aws:[a-zA-Z0-9._-]*:[a-zA-Z0-9._-]*:(?:[0-9]{12})?:[a-zA-Z0-9/:._-]+$",
                                                "title": "AWS ARN",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "arn"
                                        ],
                                        "title": "AWS Subnet",
                                        "type": "object"
                                    },
                                    "type": "array"
                                },
                                "private_subnets": {
                                    "items": {
                                        "$schema": "http://json-schema.org/draft-07/schema",
                                        "description": "AWS VCP Subnet",
                                        "examples": [],
                                        "properties": {
                                            "arn": {
                                                "$schema": "http://json-schema.org/draft-07/schema",
                                                "description": "Amazon Resource Name",
                                                "examples": [
                                                    "arn:aws:rds::ACCOUNT_NUMBER:db/prod",
                                                    "arn:aws:ec2::ACCOUNT_NUMBER:vpc/vpc-foo"
                                                ],
                                                "message": {
                                                    "pattern": "Correct format of an arn described here: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html"
                                                },
                                                "pattern": "^arn:aws:[a-zA-Z0-9._-]*:[a-zA-Z0-9._-]*:(?:[0-9]{12})?:[a-zA-Z0-9/:._-]+$",
                                                "title": "AWS ARN",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "arn"
                                        ],
                                        "title": "AWS Subnet",
                                        "type": "object"
                                    },
                                    "type": "array"
                                },
                                "public_subnets": {
                                    "items": {
                                        "$schema": "http://json-schema.org/draft-07/schema",
                                        "description": "AWS VCP Subnet",
                                        "examples": [],
                                        "properties": {
                                            "arn": {
                                                "$schema": "http://json-schema.org/draft-07/schema",
                                                "description": "Amazon Resource Name",
                                                "examples": [
                                                    "arn:aws:rds::ACCOUNT_NUMBER:db/prod",
                                                    "arn:aws:ec2::ACCOUNT_NUMBER:vpc/vpc-foo"
                                                ],
                                                "message": {
                                                    "pattern": "Correct format of an arn described here: https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html"
                                                },
                                                "pattern": "^arn:aws:[a-zA-Z0-9._-]*:[a-zA-Z0-9._-]*:(?:[0-9]{12})?:[a-zA-Z0-9/:._-]+$",
                                                "title": "AWS ARN",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "arn"
                                        ],
                                        "title": "AWS Subnet",
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            },
                            "required": [
                                "arn",
                                "cidr",
                                "private_subnets",
                                "public_subnets",
                                "internal_subnets"
                            ],
                            "title": "Infrastructure configuration",
                            "type": "object"
                        }
                    },
                    "required": [
                        "infrastructure"
                    ],
                    "title": "Artifact Data",
                    "type": "object"
                },
                "specs": {
                    "properties": {
                        "aws": {
                            "$schema": "http://json-schema.org/draft-07/schema",
                            "description": "",
                            "properties": {
                                "region": {
                                    "$schema": "http://json-schema.org/draft-07/schema",
                                    "description": "AWS Region to provision in.",
                                    "examples": [
                                        "us-west-2"
                                    ],
                                    "title": "Region",
                                    "type": "string"
                                }
                            },
                            "required": [],
                            "title": "AWS Artifact Specs",
                            "type": "object"
                        }
                    },
                    "title": "Artifact Specs",
                    "type": "object"
                }
            },
            "required": [
                "data"
            ],
            "title": "AWS Virtual Private Cloud",
            "type": "object"
        }
    },
    "required": [
        "vpc",
        "aws_authentication",
        "cdn"
    ],
    "title": "aws-ec2-instance"
}
